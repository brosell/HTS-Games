<HTML>
<HEAD>
<TITLE>
ToggleButton.cpp
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#pragma</font> <font color="blue">warning</font> <font color="black">(</font>disable <font color="black">:</font> <font color="maroon">4786</font> <font color="maroon">4503</font> <font color="maroon">4530</font><font color="black">)</font>

<font color="blue">#include</font> <font color="maroon">"ToggleButton.h"</font>
<font color="blue">#include</font> <font color="maroon">"BR_Game.h"</font>
<font color="blue">#include</font> <font color="maroon">"SDL_rotozoom.h"</font>

ToggleButton<font color="black">:</font><font color="black">:</font>ToggleButton<font color="black">(</font><font color="black">)</font><font color="black">:</font> m_isChecked<font color="black">(</font><font color="blue">false</font><font color="black">)</font>, m_checked<font color="black">(</font><font color="maroon">-1</font><font color="black">)</font>, m_unchecked<font color="black">(</font><font color="maroon">-1</font><font color="black">)</font>
<font color="black">{</font>
<font color="black">}</font>

ToggleButton<font color="black">:</font><font color="black">:</font>~ToggleButton<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
  <font color="blue">if</font> <font color="black">(</font>m_checked <font color="black">&#62;</font> <font color="maroon">0</font><font color="black">)</font>
  <font color="black">{</font>
    theGame.screen<font color="black">-</font><font color="black">&#62;</font>release<font color="black">(</font>m_checked<font color="black">)</font>;
  <font color="black">}</font>
  <font color="blue">if</font> <font color="black">(</font>m_unchecked <font color="black">&#62;</font> <font color="maroon">0</font><font color="black">)</font>
  <font color="black">{</font>
    theGame.screen<font color="black">-</font><font color="black">&#62;</font>release<font color="black">(</font>m_unchecked<font color="black">)</font>;
  <font color="black">}</font>
<font color="black">}</font>

<font color="blue">void</font> ToggleButton<font color="black">:</font><font color="black">:</font>createButton<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
  <font color="green">// FIXME: use assets and dialog template</font>
  m_checked <font color="black">=</font> theGame.screen<font color="black">-</font><font color="black">&#62;</font>acquire<font color="black">(</font><font color="maroon">"images\\UI\\checked.bmp"</font><font color="black">)</font>;
  m_unchecked <font color="black">=</font> theGame.screen<font color="black">-</font><font color="black">&#62;</font>acquire<font color="black">(</font><font color="maroon">"images\\UI\\unchecked.bmp"</font><font color="black">)</font>;
<font color="black">}</font>

<font color="blue">void</font> ToggleButton<font color="black">:</font><font color="black">:</font>onMouseClick<font color="black">(</font>MouseClickEvent<font color="black">*</font> event<font color="black">)</font>
<font color="black">{</font>
  m_isChecked <font color="black">=</font> <font color="black">!</font>m_isChecked;
<font color="black">}</font>

<font color="blue">void</font> ToggleButton<font color="black">:</font><font color="black">:</font>paint<font color="black">(</font>Display<font color="black">*</font> surface<font color="black">)</font>
<font color="black">{</font>
  <font color="blue">if</font> <font color="black">(</font>m_checked <font color="black">=</font><font color="black">=</font> <font color="maroon">-1</font><font color="black">)</font>
  <font color="black">{</font>
    createButton<font color="black">(</font><font color="black">)</font>;
  <font color="black">}</font>
  Rect r <font color="black">=</font> getPosition<font color="black">(</font><font color="black">)</font>;
  <font color="blue">if</font> <font color="black">(</font>m_isChecked<font color="black">)</font>
  <font color="black">{</font>
    surface<font color="black">-</font><font color="black">&#62;</font>blit<font color="black">(</font>m_checked, r.x, r.y<font color="black">)</font>;
  <font color="black">}</font>
  <font color="blue">else</font>
  <font color="black">{</font>
    surface<font color="black">-</font><font color="black">&#62;</font>blit<font color="black">(</font>m_unchecked, r.x, r.y<font color="black">)</font>;
  <font color="black">}</font>
<font color="black">}</font>
</PRE>
</BODY>
</HTML>
