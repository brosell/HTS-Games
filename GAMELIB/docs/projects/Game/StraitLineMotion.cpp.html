<HTML>
<HEAD>
<TITLE>
StraitLineMotion.cpp
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#include</font> <font color="maroon">"StraitLineMotion.h"</font>
<font color="blue">#include</font> <font color="maroon">&#60;math.h&#62;</font>

<font color="blue">void</font> StraitLineMotion<font color="black">:</font><font color="black">:</font>makeUnitVector<font color="black">(</font><font color="blue">float</font> vx, <font color="blue">float</font> vy, <font color="blue">float</font><font color="black">&</font> uvx, <font color="blue">float</font><font color="black">&</font> uvy<font color="black">)</font>
<font color="black">{</font>
  m_length<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="black">(</font>sqrt<font color="black">(</font>vx<font color="black">*</font>vx <font color="black">+</font> vy<font color="black">*</font>vy<font color="black">)</font><font color="black">)</font>;
  <font color="blue">if</font> <font color="black">(</font>m_length<font color="black">=</font><font color="black">=</font><font color="maroon">0</font><font color="black">)</font>
  <font color="black">{</font>
    <font color="blue">int</font> x<font color="black">=</font><font color="maroon">0</font>;
  <font color="black">}</font>
  uvx<font color="black">=</font>vx<font color="black">/</font>m_length;
  uvy<font color="black">=</font>vy<font color="black">/</font>m_length;
<font color="black">}</font>

<font color="blue">void</font> StraitLineMotion<font color="black">:</font><font color="black">:</font>tickAndMove<font color="black">(</font><font color="blue">int</font><font color="black">&</font> retX, <font color="blue">int</font><font color="black">&</font> retY<font color="black">)</font>
<font color="black">{</font>
  <font color="blue">if</font> <font color="black">(</font>m_vel <font color="black">=</font><font color="black">=</font> <font color="maroon">0</font> <font color="black">|</font><font color="black">|</font> <font color="black">(</font>m_uvx<font color="black">=</font><font color="black">=</font><font color="maroon">0</font> <font color="black">&</font><font color="black">&</font> m_uvy<font color="black">=</font><font color="black">=</font><font color="maroon">0</font><font color="black">)</font><font color="black">)</font>
  <font color="black">{</font>
    setMoved<font color="black">(</font><font color="blue">false</font><font color="black">)</font>;
    <font color="blue">return</font>;
  <font color="black">}</font>
  setMoved<font color="black">(</font><font color="blue">true</font><font color="black">)</font>;

  m_x<font color="black">+</font><font color="black">=</font><font color="black">(</font>m_uvx<font color="black">*</font>m_vel<font color="black">)</font>;
  m_y<font color="black">+</font><font color="black">=</font><font color="black">(</font>m_uvy<font color="black">*</font>m_vel<font color="black">)</font>;
  
  <font color="blue">if</font> <font color="black">(</font>m_x <font color="black">&#62;</font> <font color="maroon">640</font><font color="black">-</font>m_w<font color="black">)</font>
  <font color="black">{</font>
    bounceVirtSurface<font color="black">(</font><font color="black">)</font>;
    m_x <font color="black">=</font> <font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="maroon">640</font><font color="black">-</font>m_w;
  <font color="black">}</font>

  <font color="blue">if</font> <font color="black">(</font>m_x <font color="black">&#60;</font> <font color="maroon">0</font><font color="black">)</font>
  <font color="black">{</font>
    bounceVirtSurface<font color="black">(</font><font color="black">)</font>;
    m_x <font color="black">=</font> <font color="maroon">0</font>;
  <font color="black">}</font>

  <font color="blue">if</font> <font color="black">(</font>m_y <font color="black">&#62;</font> <font color="maroon">480</font><font color="black">-</font>m_h<font color="black">)</font>
  <font color="black">{</font>
    bounceHorizSurface<font color="black">(</font><font color="black">)</font>;
    m_y<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="maroon">480</font><font color="black">-</font>m_h;
  <font color="black">}</font>

  <font color="blue">if</font> <font color="black">(</font>m_y <font color="black">&#60;</font> <font color="maroon">0</font><font color="black">)</font>
  <font color="black">{</font>
    bounceHorizSurface<font color="black">(</font><font color="black">)</font>;
    m_y<font color="black">=</font><font color="maroon">0</font>;
  <font color="black">}</font>

  retX<font color="black">=</font><font color="black">(</font><font color="blue">int</font><font color="black">)</font><font color="black">(</font>m_x<font color="black">+</font><font color="maroon">0</font>.<font color="maroon">5</font><font color="black">)</font>;
  retY<font color="black">=</font><font color="black">(</font><font color="blue">int</font><font color="black">)</font><font color="black">(</font>m_y<font color="black">+</font><font color="maroon">0</font>.<font color="maroon">5</font><font color="black">)</font>;
<font color="black">}</font>
</PRE>
</BODY>
</HTML>
