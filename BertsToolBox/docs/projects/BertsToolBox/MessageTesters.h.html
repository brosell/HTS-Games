<HTML>
<HEAD>
<TITLE>
MessageTesters.h
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#ifndef</font> MessageTesters_h
<font color="blue">#define</font> MessageTesters_h

<font color="blue">#include</font> <font color="maroon">"Message.h"</font>
<font color="blue">#include</font> <font color="maroon">"ObjectCache.h"</font>

<font color="blue">class</font> MessageTester
<font color="black">{</font>
<font color="blue">public</font><font color="black">:</font>
  virtual <font color="blue">bool</font> test<font color="black">(</font>Message<font color="black">*</font><font color="black">)</font> <font color="black">=</font> <font color="maroon">0</font>;
<font color="black">}</font>;

<font color="blue">class</font> IsMessageType<font color="black">:</font> <font color="blue">public</font> MessageTester
<font color="black">{</font>
<font color="blue">public</font><font color="black">:</font>
  IsMessageType<font color="black">(</font>UDBLBYTE type <font color="black">=</font> <font color="maroon">-1</font><font color="black">)</font><font color="black">:</font> m_type<font color="black">(</font>type<font color="black">)</font> <font color="black">{</font> <font color="black">}</font>
  <font color="blue">void</font> setType<font color="black">(</font>UDBLBYTE type<font color="black">)</font> <font color="black">{</font> m_type <font color="black">=</font> type; <font color="black">}</font>

  virtual <font color="blue">bool</font> test<font color="black">(</font>Message<font color="black">*</font> msg<font color="black">)</font>
  <font color="black">{</font>
    <font color="blue">return</font> <font color="black">(</font>msg<font color="black">-</font><font color="black">&#62;</font>getType<font color="black">(</font><font color="black">)</font> <font color="black">=</font><font color="black">=</font> m_type<font color="black">)</font>;
  <font color="black">}</font>

  <font color="blue">void</font> reclaim<font color="black">(</font><font color="black">)</font> <font color="black">{</font> m_type <font color="black">=</font> <font color="maroon">-1</font>; <font color="black">}</font>

  <font color="blue">static</font>
  IsMessageType<font color="black">*</font> acquire<font color="black">(</font><font color="black">)</font> <font color="black">{</font> <font color="blue">return</font> s_cache.acquire<font color="black">(</font><font color="black">)</font>; <font color="black">}</font>
  <font color="blue">static</font> <font color="blue">void</font> release<font color="black">(</font>IsMessageType<font color="black">*</font> imt<font color="black">)</font> <font color="black">{</font> s_cache.release<font color="black">(</font>imt<font color="black">)</font>; <font color="black">}</font>

<font color="blue">private</font><font color="black">:</font>
  UDBLBYTE m_type;

  <font color="blue">static</font> ObjectCache<font color="black">&#60;</font>IsMessageType<font color="black">&#62;</font> s_cache;
<font color="black">}</font>;

<font color="blue">#endif</font>
</PRE>
</BODY>
</HTML>
